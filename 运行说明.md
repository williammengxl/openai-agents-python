# OpenAI Agents SDK Python - è¿è¡Œè¯´æ˜

## âœ… ç¯å¢ƒé…ç½®æˆåŠŸ

### å·²å®‰è£…ç»„ä»¶
- Python 3.9.6
- è™šæ‹Ÿç¯å¢ƒ (.venv)
- openai-agents 0.4.2
- æ‰€æœ‰æ ¸å¿ƒä¾èµ–

## ğŸ‰ æ¼”ç¤ºè¿è¡ŒæˆåŠŸ

æˆ‘å·²ç»æˆåŠŸè¿è¡Œäº†æ¡†æ¶æ¼”ç¤ºï¼Œæ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½éƒ½æ­£å¸¸å·¥ä½œï¼

### æ¼”ç¤ºå†…å®¹

1. **âœ… æ ¸å¿ƒæ¨¡å—å¯¼å…¥** - Agent, Runner, function_tool ç­‰
2. **âœ… åˆ›å»ºä»£ç†** - åŸºæœ¬ä»£ç†é…ç½®
3. **âœ… å·¥å…·ç³»ç»Ÿ** - å‡½æ•°è£…é¥°å™¨è‡ªåŠ¨ç”Ÿæˆå·¥å…·
4. **âœ… å¤šä»£ç†åä½œ** - Handoffs æœºåˆ¶
5. **âœ… ç»“æ„åŒ–è¾“å‡º** - Pydantic æ¨¡å‹è¾“å‡º
6. **âœ… æ¨¡å‹è®¾ç½®** - Temperature, Max Tokens ç­‰
7. **âœ… ä¼šè¯ç®¡ç†** - SQLite ä¼šè¯å­˜å‚¨
8. **âœ… è‡ªå®šä¹‰ä¸Šä¸‹æ–‡** - ç”¨æˆ·ä¸Šä¸‹æ–‡ä¼ é€’
9. **âœ… è¿½è¸ªç³»ç»Ÿ** - å†…ç½®è¿½è¸ªåŠŸèƒ½
10. **âœ… æ‰§è¡Œå¼•æ“** - Runner é…ç½®

## ğŸ“ ä»£ç ç¤ºä¾‹

### 1. æœ€ç®€å•çš„ Hello World

```python
from agents import Agent, Runner
import asyncio

async def main():
    agent = Agent(
        name="åŠ©æ‰‹",
        instructions="ä½ æ˜¯ä¸€ä¸ªæœ‰å¸®åŠ©çš„åŠ©æ‰‹ã€‚",
    )
    
    result = await Runner.run(agent, "å†™ä¸€é¦–å…³äºç¼–ç¨‹çš„ä¿³å¥")
    print(result.final_output)

if __name__ == "__main__":
    asyncio.run(main())
```

### 2. ä½¿ç”¨å·¥å…·çš„ä»£ç†

```python
from agents import Agent, Runner, function_tool
import asyncio

@function_tool
def get_weather(city: str) -> str:
    """è·å–æŒ‡å®šåŸå¸‚çš„å¤©æ°”
    
    Args:
        city: åŸå¸‚åç§°
    """
    return f"{city}çš„å¤©æ°”æ˜¯æ™´å¤©ï¼Œæ¸©åº¦20Â°C"

async def main():
    agent = Agent(
        name="å¤©æ°”åŠ©æ‰‹",
        instructions="ä½ å¯ä»¥æŸ¥è¯¢å¤©æ°”ä¿¡æ¯ã€‚",
        tools=[get_weather],
    )
    
    result = await Runner.run(agent, "åŒ—äº¬ä»Šå¤©å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ")
    print(result.final_output)

if __name__ == "__main__":
    asyncio.run(main())
```

### 3. å¤šä»£ç†åä½œï¼ˆHandoffsï¼‰

```python
from agents import Agent, Runner
import asyncio

# åˆ›å»ºä¸“å®¶ä»£ç†
math_agent = Agent(
    name="æ•°å­¦ä¸“å®¶",
    handoff_description="å¤„ç†æ•°å­¦é—®é¢˜çš„ä¸“å®¶",
    instructions="ä½ æ˜¯æ•°å­¦ä¸“å®¶ï¼Œè¯¦ç»†è§£ç­”æ•°å­¦é—®é¢˜ã€‚",
)

history_agent = Agent(
    name="å†å²ä¸“å®¶",
    handoff_description="å¤„ç†å†å²é—®é¢˜çš„ä¸“å®¶",
    instructions="ä½ æ˜¯å†å²ä¸“å®¶ï¼Œå›ç­”å†å²ç›¸å…³é—®é¢˜ã€‚",
)

# åˆ›å»ºè·¯ç”±ä»£ç†
triage_agent = Agent(
    name="è·¯ç”±åŠ©æ‰‹",
    instructions="æ ¹æ®ç”¨æˆ·é—®é¢˜ç±»å‹ï¼Œè½¬æ¥åˆ°åˆé€‚çš„ä¸“å®¶ä»£ç†ã€‚",
    handoffs=[math_agent, history_agent],
)

async def main():
    result = await Runner.run(triage_agent, "ä»€ä¹ˆæ˜¯å‹¾è‚¡å®šç†ï¼Ÿ")
    print(result.final_output)
    print(f"å½“å‰ä»£ç†: {result.current_agent.name}")

if __name__ == "__main__":
    asyncio.run(main())
```

### 4. ç»“æ„åŒ–è¾“å‡º

```python
from agents import Agent, Runner
from pydantic import BaseModel
import asyncio

class WeatherInfo(BaseModel):
    city: str
    temperature: int
    condition: str
    advice: str

async def main():
    agent = Agent(
        name="å¤©æ°”åŠ©æ‰‹",
        instructions="æä¾›ç»“æ„åŒ–çš„å¤©æ°”ä¿¡æ¯ã€‚",
        output_type=WeatherInfo,
    )
    
    result = await Runner.run(agent, "åŒ—äº¬ä»Šå¤©å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ")
    weather = result.final_output_as(WeatherInfo)
    
    print(f"åŸå¸‚: {weather.city}")
    print(f"æ¸©åº¦: {weather.temperature}Â°C")
    print(f"å¤©æ°”: {weather.condition}")
    print(f"å»ºè®®: {weather.advice}")

if __name__ == "__main__":
    asyncio.run(main())
```

### 5. ä½¿ç”¨ä¼šè¯ï¼ˆSessionï¼‰

```python
from agents import Agent, Runner, SQLiteSession
import asyncio

async def main():
    agent = Agent(
        name="åŠ©æ‰‹",
        instructions="ä½ æ˜¯ä¸€ä¸ªæœ‰å¸®åŠ©çš„åŠ©æ‰‹ï¼Œå›ç­”è¦ç®€æ´ã€‚",
    )
    
    # åˆ›å»ºä¼šè¯
    session = SQLiteSession("conversation_123", "conversations.db")
    
    # ç¬¬ä¸€è½®å¯¹è¯
    result = await Runner.run(
        agent,
        "é‡‘é—¨å¤§æ¡¥åœ¨å“ªä¸ªåŸå¸‚ï¼Ÿ",
        session=session
    )
    print(f"ç¬¬ä¸€è½®: {result.final_output}")
    
    # ç¬¬äºŒè½®å¯¹è¯ - ä»£ç†è‡ªåŠ¨è®°ä½ä¸Šä¸‹æ–‡
    result = await Runner.run(
        agent,
        "é‚£æ˜¯åœ¨å“ªä¸ªå·ï¼Ÿ",
        session=session
    )
    print(f"ç¬¬äºŒè½®: {result.final_output}")

if __name__ == "__main__":
    asyncio.run(main())
```

## ğŸš€ å¦‚ä½•è¿è¡Œ

### å‰ææ¡ä»¶

1. **è®¾ç½® OpenAI API Key**ï¼ˆè¿è¡ŒçœŸå®ç¤ºä¾‹éœ€è¦ï¼‰
   ```bash
   export OPENAI_API_KEY='sk-your-api-key-here'
   ```

2. **æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ**
   ```bash
   cd /Users/williammeng/agent-ai/openai-agents-python/openai-agents-python
   source .venv/bin/activate
   ```

### è¿è¡Œæ¼”ç¤º

```bash
# è¿è¡Œæ¡†æ¶åŠŸèƒ½æ¼”ç¤ºï¼ˆæ— éœ€ API keyï¼‰
python simple_demo.py

# è¿è¡Œå®˜æ–¹ç¤ºä¾‹ï¼ˆéœ€è¦ API keyï¼‰
python examples/basic/hello_world.py
python examples/agent_patterns/routing.py
python examples/tools/web_search.py
```

### è¿è¡Œæµ‹è¯•

```bash
# å®‰è£…æµ‹è¯•ä¾èµ–
pip install pytest pytest-asyncio pytest-mock

# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest tests/ -v

# è¿è¡Œç‰¹å®šæµ‹è¯•
pytest tests/test_agent_runner.py -v
pytest tests/test_function_tool.py -v
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
openai-agents-python/
â”œâ”€â”€ src/agents/              # æ ¸å¿ƒæºä»£ç 
â”‚   â”œâ”€â”€ agent.py            # Agent ç±»
â”‚   â”œâ”€â”€ run.py              # Runner æ‰§è¡Œå¼•æ“
â”‚   â”œâ”€â”€ tool.py             # å·¥å…·ç³»ç»Ÿ
â”‚   â”œâ”€â”€ handoffs.py         # åˆ‡æ¢æœºåˆ¶
â”‚   â”œâ”€â”€ guardrail.py        # å®‰å…¨æ£€æŸ¥
â”‚   â”œâ”€â”€ models/             # æ¨¡å‹æä¾›å•†
â”‚   â”œâ”€â”€ tracing/            # è¿½è¸ªç³»ç»Ÿ
â”‚   â”œâ”€â”€ memory/             # ä¼šè¯ç®¡ç†
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ examples/                # ç¤ºä¾‹ä»£ç 
â”‚   â”œâ”€â”€ basic/              # åŸºç¡€ç¤ºä¾‹
â”‚   â”œâ”€â”€ agent_patterns/     # è®¾è®¡æ¨¡å¼
â”‚   â”œâ”€â”€ tools/              # å·¥å…·ä½¿ç”¨
â”‚   â”œâ”€â”€ handoffs/           # åˆ‡æ¢ç¤ºä¾‹
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ tests/                   # æµ‹è¯•å¥—ä»¶
â”œâ”€â”€ docs/                    # æ–‡æ¡£ï¼ˆå¤šè¯­è¨€ï¼‰
â”œâ”€â”€ simple_demo.py           # æ¡†æ¶æ¼”ç¤ºï¼ˆå·²è¿è¡ŒæˆåŠŸï¼‰
â””â”€â”€ è¿è¡Œè¯´æ˜.md             # æœ¬æ–‡æ¡£
```

## ğŸ“ å­¦ä¹ è·¯å¾„

### 1. å…¥é—¨ï¼ˆ5åˆ†é’Ÿï¼‰
- è¿è¡Œ `simple_demo.py` äº†è§£æ¡†æ¶ç»“æ„
- æŸ¥çœ‹ `examples/basic/hello_world.py`

### 2. åŸºç¡€ï¼ˆ30åˆ†é’Ÿï¼‰
- å­¦ä¹ å·¥å…·ä½¿ç”¨: `examples/basic/tools.py`
- å­¦ä¹ åˆ‡æ¢æœºåˆ¶: `examples/agent_patterns/routing.py`
- å­¦ä¹ ä¼šè¯ç®¡ç†: `examples/memory/sqlite_session_example.py`

### 3. è¿›é˜¶ï¼ˆ2å°æ—¶ï¼‰
- å¤šä»£ç†æ¨¡å¼: `examples/agent_patterns/`
- å®‰å…¨æ£€æŸ¥: `examples/basic/tool_guardrails.py`
- å¤æ‚åº”ç”¨: `examples/research_bot/`

### 4. é«˜çº§ï¼ˆ1å¤©ï¼‰
- é˜…è¯»æºä»£ç : `src/agents/`
- æŸ¥çœ‹æµ‹è¯•: `tests/`
- è‡ªå®šä¹‰æ‰©å±•: æ¨¡å‹ã€å·¥å…·ã€ä¼šè¯

## ğŸ“š æ–‡æ¡£é“¾æ¥

- **å®˜æ–¹æ–‡æ¡£**: https://openai.github.io/openai-agents-python/
- **GitHub**: https://github.com/openai/openai-agents-python
- **å¿«é€Ÿå¼€å§‹**: docs/quickstart.md
- **API å‚è€ƒ**: docs/ref/

## ğŸ’¡ å¸¸è§é—®é¢˜

### Q: ä¸ºä»€ä¹ˆéœ€è¦ API keyï¼Ÿ
A: è¿è¡ŒçœŸå® LLM éœ€è¦è°ƒç”¨ OpenAI APIã€‚æ¼”ç¤ºè„šæœ¬ä¸éœ€è¦ API keyã€‚

### Q: æ”¯æŒå…¶ä»– LLM å—ï¼Ÿ
A: æ˜¯çš„ï¼é€šè¿‡ LiteLLM æ”¯æŒ 100+ LLM æä¾›å•†ã€‚

### Q: å¦‚ä½•è°ƒè¯•ï¼Ÿ
A: ä½¿ç”¨å†…ç½®è¿½è¸ªç³»ç»Ÿï¼ŒæŸ¥çœ‹ OpenAI Dashboard æˆ– Logfireã€‚

### Q: å¦‚ä½•éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒï¼Ÿ
A: ä½¿ç”¨ Redis Sessionã€é…ç½®è¿½è¸ªã€è®¾ç½® Guardrailsã€‚

## ğŸ‰ ä¸‹ä¸€æ­¥

1. **è®¾ç½® API key** å¹¶è¿è¡ŒçœŸå®ç¤ºä¾‹
2. **æŸ¥çœ‹ examples/** ç›®å½•å­¦ä¹ æ›´å¤šæ¨¡å¼
3. **é˜…è¯»æ–‡æ¡£** äº†è§£é«˜çº§åŠŸèƒ½
4. **æ„å»ºåº”ç”¨** å¼€å§‹ä½ çš„é¡¹ç›®ï¼

---

**çŠ¶æ€**: âœ… ç¯å¢ƒé…ç½®å®Œæˆï¼Œæ¼”ç¤ºè¿è¡ŒæˆåŠŸ
**æ—¶é—´**: 2025-10-31
**ç‰ˆæœ¬**: openai-agents 0.4.2

